---
title: EXPRESSIONS R√âGULI√àRES
font_family: Fira Sans
primary_colour: "#273f43"
title_textsize: "110pt"
titlebox_bordercol: "#273f43"
titlebox_borderwidth: "3cm"
poster_width: "53.7in"
author:
  - name: Petit aide-m√©moire
column_numbers: 3
output: 
  posterdown::posterdown_html:
    css: personal.css
    self_contained: true
---

```{r setup, include=FALSE}
xaringanthemer::style_extra_css(
  css = list(
    "div.level1" = list("padding-bottom" = ".8em !important"),
    ".lightable-striped tbody tr:nth-of-type(even)" = list("background" = "#00808024 !important"),
    "pre,.sourceCode" = list("font-size" = "45px !important", "white-space" = "pre-wrap !important"),
    "div.sourceCode" = list("width" = "99% !important"),
    "pre.sourceCode" = list("margin" = "0em !important")
  ),
  outfile = "personal.css",
  append = FALSE,
  heading = "Extra CSS"
)
```

# Introduction

Les **expressions r√©guli√®res** (*regular expression* ou ***regex*** en anglais) ou parfois aussi *expressions rationnelles* permettent de d√©crire un ensemble de caract√®res au moyen d'un **motif** (*pattern* en anglais). Ces expressions permettent de faire des **recherches** ou des **remplacements** avec des motifs complexes.

# M√©tacaract√®res

```{r echo=FALSE, out.width="100%"}
tibble::tribble(
  ~col1, ~col2, ~col3, ~col4,
  ".", "^", "$", "\\*",
  "\\+", "?", "{", "}",
  "[", "]", "\\\\", "|",
  "(", ")", "", ""
) |> 
  kableExtra::kbl(align = "c", col.names = NULL) |> 
  kableExtra::kable_material(c("striped")) |> 
  kableExtra::kable_styling(stripe_color = "#00808024")
```

Le m√©tacaract√®re `\` permet d'√©chapper les m√©tacaract√®res.

# Ancrages

- `^` : d√©but d'une ligne (multilignes)
- `$` : fin d'une ligne (multilignes)
- `\A` : d√©but d'une chaine de caract√®res
- `\Z` : fin d'une chaine de caract√®res
- `\b` : limite d'un mot (d√©but ou fin)
- `\B` : oppos√© de `\b`

# Classes de caract√®res

- `.` : n'importe quel symbole
- `[0-9]` ou `\d` : chiffres de *0* √† *9*
- `[^0-9]` ou `\D` : tout sauf les chiffres de *0* √† *9*
- `[aeiou]` : les lettres *a, e, i, o* et *u*
- `[^,.!?]` : tout sauf les symboles `,.!?`
- `[a-z]` : lettre minuscule *a* √† *z*
- `\s` : tous les espaces
- `\S` : tout sauf les espaces
- `\w` : lettres, chiffres et `_`
- `\W` : tout sauf aux lettres, chiffres et `_`

## **Standard *POSIX***

- `[:upper:]` : Lettres majuscules
- `[:lower:]` : Lettres minuscules
- `[:alpha:]` : Lettres majuscules et minuscules
- `[:alnum:]` : Lettres et chiffres
- `[:digit:]` : Chiffres (correspond √† `\d` ou `[0-9]`)
- `[:punct:]` : Ponctuation

# Quantifieurs

- `?` : 0 ou 1 fois
- `*` : 0 fois ou plus
- `+` : 1 fois ou plus
- `{6}` : 6 fois (exactement)
- `{3,5}` : 3, 4 ou 5 fois
- `{4,}` : 4 fois ou plus

# Groupes et op√©rateur *OU*

Les m√©tacaract√®res `(` et `)` permettent de d√©finir un groupe dans un motif.

- `(bug)` : groupe *capturant* avec le motif `bug`
- `(?:bug)` : groupe *non capturant* avec le motif `bug`

Un groupe *capturant* peut √™tre r√©f√©renc√© dans un remplacement avec `\1` pour faire r√©f√©rence au premier groupe, `\2` le deuxi√®me groupe et ainsi de suite.

Le m√©tacaract√®re `|` fait office d'op√©rateur logique *OU*. Par exemple :

- `m(a|i)c` : motif qui correspond √† *mac* ou √† *mic*
- `(jour|nuit)` : motif qui correspond √† *jour* ou √† *nuit*

# Ressources utiles

## **R√©f√©rences**

- Guides et r√©f√©rences (en anglais) :  
https://www.regular-expressions.info

- Guides et r√©f√©rences (ax√© sur le langage PHP, en fran√ßais) :  
http://www.expreg.com

- Exemples d'expressions fr√©quentes :  
https://projects.lukehaas.me/regexhub/

- Documentation *regex* de *Python* üêç (en fran√ßais) :  
https://docs.python.org/fr/3/howto/regex.html

## **Moteurs d'expressions r√©guli√®res**

- https://regexr.com

- https://regex101.com

- https://debuggex.com

<div style="height: 100px"></div>

# *Python* üêç et le module *re*

Le module *re* permet d'utiliser les expressions r√©guli√®res dans *Python* üêç. Pour l'importer :

```{python, results='hide'}
import re
```

## **M√©thodes**

- re.**findall**(*pattern, string, flags=0*)  
retourne toutes les occurences de *`pattern`*, retourne une liste

- re.**split**(*pattern, string, maxsplit=0, flags=0*)  
divise *`string`* √† partir de *`pattern`*, retourne une liste

- re.**sub**(*pattern, repl, string, count=0, flags=0*)  
remplace *`pattern`* par *`repl`* dans *`string`*, retourne une chaine de caract√®res

*`pattern`* : expression r√©guli√®re  
*`repl`* : chaine de caract√®res de remplacement  
*`string`* : chaine de caract√®res dans laquelle chercher le motif  
*`maxsplit`* : nombre maximal de morceaux  
*`count`* : nombre maximal de remplacements √† effectuer  
*`flags`* : options sp√©cifiques aux expressions r√©guli√®res

## **Exemples**

```{python}
re.findall(r"\d+", "Un ordinateur fait autant d'erreur en 2 secondes que 20 humains en 20 ans.")
```

```{python}
re.split(r"/", "un/deux/trois/quatre/cinq/six/sept")
```

```{python}
re.sub(r"√†[^,]*", "aux expressions r√©guli√®res", "Quand on se met √† l'informatique, il vaut mieux avoir BEAUCOUP d‚Äôamis.")
```
